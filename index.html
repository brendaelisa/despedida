<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gracias, Queridos Misioneros</title>
    <link rel="icon" href="data:," /> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
    <style>
        :root {
            /* Definición de variables de color para una paleta moderna */
            --primary-color: #5a80a2; /* Azul suave */
            --secondary-color: #e0e7eb; /* Gris claro */
            --text-color: #333d42; /* Gris oscuro para el texto principal */
            --light-text-color: #f8f8f8; /* Texto claro para fondos oscuros */
            --accent-color: #8bbdc7; /* Azul/verde para acentos */
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--secondary-color);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            line-height: 1.6;
        }
        header {
            background-color: var(--primary-color);
            color: var(--light-text-color);
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: relative; /* Importante para posicionar el botón dentro */
        }
        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            margin: 0;
            letter-spacing: 1px;
        }
        header p {
            font-size: 1.1rem;
            margin-top: 0.5rem;
        }
        /* Estilo para el botón de música en el encabezado */
        header #playMusicBtn {
            position: absolute; /* Permite posicionarlo con top/right/left */
            top: 15px; /* Separación desde arriba */
            right: 15px; /* Separación desde la derecha */
            padding: 10px 15px;
            background-color: var(--accent-color);
            color: var(--light-text-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            z-index: 1000; /* Asegura que esté por encima de otros elementos */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Sombra sutil para destacarlo */
        }
        section {
            padding: 2rem;
            max-width: 900px;
            margin: 2rem auto;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            font-weight: 700;
        }
        /* --- Estilos para el carrusel de galería --- */
        .galeria-container {
            position: relative;
            max-width: 100%; /* Para controlar el ancho del contenedor del carrusel */
            margin: 2rem auto;
            overflow: hidden; /* Oculta las imágenes que no están en la vista */
            border-radius: 12px; /* Coincide con el radio de la sección */
            box-shadow: 0 5px 15px rgba(0,0,0,0.08); /* Coincide con la sombra de la sección */
        }

        .galeria-inner {
            display: flex;
            transition: transform 0.5s ease-in-out; /* Transición suave para el deslizamiento */
        }

        .galeria-item {
            min-width: calc(100% / 3); /* 3 imágenes por vista en pantallas grandes */
            box-sizing: border-box; /* Incluye padding y borde en el ancho */
            padding: 1rem; /* Espaciado entre imágenes */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .galeria-item img {
            width: 100%; /* Hace que la imagen ocupe el 100% del item */
            height: 180px; /* Altura fija para todas las imágenes */
            object-fit: cover; /* Mantiene la proporción, cubriendo el área y recortando si es necesario */
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .galeria-item img:hover {
            transform: translateY(-5px);
        }

        .galeria-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(90, 128, 162, 0.7); /* primary-color con transparencia */
            color: var(--light-text-color);
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1.5rem;
            border-radius: 50%;
            z-index: 10; /* Asegura que los botones estén por encima de las imágenes */
            transition: background-color 0.3s ease;
        }

        .galeria-nav-button:hover {
            background-color: var(--primary-color);
        }

        .galeria-nav-button.prev {
            left: 10px;
        }

        .galeria-nav-button.next {
            right: 10px;
        }

        .mensajes blockquote {
            background-color: var(--secondary-color);
            border-left: 6px solid var(--accent-color);
            margin: 1.5rem 0;
            padding: 1.5rem;
            font-style: italic;
            min-height: 180px;
            transition: opacity 1s ease;
            border-radius: 8px;
            line-height: 1.7;
            color: var(--text-color);
        }
        .mensajes blockquote strong {
            color: var(--primary-color);
        }
        footer {
            background-color: var(--primary-color);
            color: var(--light-text-color);
            text-align: center;
            padding: 1.5rem;
            margin-top: 4rem;
            font-size: 1rem;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
        }
        footer p {
            margin: 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }
            section {
                padding: 1.5rem;
                margin: 1rem auto;
            }
            h2 {
                font-size: 1.7rem;
            }
            .galeria-item {
                min-width: calc(100% / 2); /* 2 imágenes por vista en tablets */
            }
            .galeria-item img {
                height: 150px;
            }
            /* Ajuste del botón en móviles para que no se superponga */
            header #playMusicBtn {
                top: 10px; /* Un poco menos desde arriba */
                right: 10px; /* Un poco menos desde la derecha */
                font-size: 0.8rem; /* Tamaño de fuente más pequeño */
                padding: 8px 12px; /* Padding más pequeño */
            }
        }
        @media (max-width: 480px) {
            header h1 {
                font-size: 2rem;
            }
            section {
                padding: 1rem;
            }
            h2 {
                font-size: 1.5rem;
            }
            .galeria-item {
                min-width: 100%; /* 1 imagen por vista en móviles */
            }
            .galeria-item img {
                height: auto;
            }
             header #playMusicBtn {
                top: 8px; 
                right: 8px; 
                font-size: 0.7rem; 
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <audio id="miMusica" loop hidden>
        <source src="audio/1006 - En tu corazón entona una canción.mp3" type="audio/mpeg" />
        Tu navegador no soporta audio HTML5.
    </audio>

    <header>
        <h1>Gracias, Queridos Misioneros</h1>
        <p>Una misión de amor que nunca olvidaremos</p>
        <button id="playMusicBtn" style="display: block;">Reproducir Música</button>
    </header>

    <section>
        <h2>🌟 Un hasta pronto</h2>
        <p>Gracias Elder y Hermana Bishop por su amor, su fe, su servicio y su ejemplo. Esta página es un pequeño recuerdo de todo lo que dejaron en nuestros corazones, con la esperanza y la fe de que pronto nos volveremos a encontrar.</p>
    </section>

    <section>
        <h2>📸 Galería de Fotos</h2>
        <div class="galeria-container">
            <div class="galeria-inner" id="galeriaInner">
                <div class="galeria-item"><img src="images/1.jpg" alt="Foto 1" /></div>
                <div class="galeria-item"><img src="images/2.jpg" alt="Foto 2" /></div>
                <div class="galeria-item"><img src="images/3.jpg" alt="Foto 3" /></div>
                <div class="galeria-item"><img src="images/4.jpg" alt="Foto 4" /> /></div>
                <div class="galeria-item"><img src="images/5.jpg" alt="Foto 5" /></div>
                <div class="galeria-item"><img src="images/6.jpg" alt="Foto 6" /></div>
                <div class="galeria-item"><img src="images/7.jpg" alt="Foto 7" /></div>
                <div class="galeria-item"><img src="images/8.jpg" alt="Foto 8" /></div>
                <div class="galeria-item"><img src="images/9.jpg" alt="Foto 9" /></div>
                <div class="galeria-item"><img src="images/10.jpg" alt="Foto 10" /></div>
                <div class="galeria-item"><img src="images/11.jpg" alt="Foto 11" /></div>
                <div class="galeria-item"><img src="images/12.jpg" alt="Foto 12" /></div>
                <div class="galeria-item"><img src="images/13.jpg" alt="Foto 13" /></div>
                <div class="galeria-item"><img src="images/14.jpg" alt="Foto 14" /></div>
                <div class="galeria-item"><img src="images/15.jpg" alt="Foto 15" /></div>
                <div class="galeria-item"><img src="images/16.jpg" alt="Foto 16" /></div>
                <div class="galeria-item"><img src="images/17.jpg" alt="Foto 17" /></div>
            </div>
            <button class="galeria-nav-button prev" id="prevBtn">❮</button>
            <button class="galeria-nav-button next" id="nextBtn">❯</button>
        </div>
    </section>

    <section class="mensajes">
        <h2>💌 Mensajes de Agradecimiento</h2>
        <blockquote id="mensaje-actual"></blockquote>
    </section>

    <section>
        <h2>💖 La Esperanza del Reencuentro</h2>
        <p><em>Con la fe inquebrantable en que los lazos forjados en el servicio del Señor son eternos, anhelamos el día en que nuestros caminos se crucen de nuevo. Así como Él nos prometió: "Mas la senda de los justos es como la luz de la aurora, Que va en aumento hasta que el día es perfecto." – Proverbios 4:18. Que esta luz nos guíe hasta nuestro próximo "hola".</em></p>
    </section>
    <footer>
        <p>Con amor, su familia en la fe ❤️Rama 25 de Mayo</p>
    </footer>

    <script>
        // Script para los mensajes de agradecimiento (CON UN NUEVO MENSAJE)
        const mensajes = [
            `<strong>Macarena Castro y Gladys Delgado:</strong><br>
            En estos tiempos que corren, siempre es bueno ser agradecido y en este caso a los Hermanos Bishop por tan grande labor de prestar sus servicios en la Rama de 25 de Mayo y principalmente con respecto a nosotras. Solo me cabe decir gracias a nuestro Padre Celestial por enviarnos tan bellas personas y que los bendiga como matrimonio, familia y especialmente como sus mensajeros del Evangelio de Jesucristo. Que la humildad y el amor que los caracteriza sean la luz para seguir adelante en nuestras vidas.<br>
            Se les quiere mucho ❤️ y los vamos a extrañar. Dios los siga bendiciendo. Gracias, gracias.`,

            `<strong>Eliana:</strong><br>
            Muchas gracias por todo su amor y compromiso a su misión. Hoy llegó el día que muchos no queríamos que llegara, pero llegó. Gracias por todo lo que han hecho por nosotros. Por siempre estarán en nuestros corazones. Esto no es una despedida, es un “nos vemos pronto”, familia Bishop. Buen regreso a casa, les amamos y les agradezco por todo.`,

            `<strong>Ricardo Toledo:</strong><br>
            Hermanos Bishop, quisiera un intelecto para escribir las frases más hermosas, pero solamente me nace un agradecimiento al Señor por haber puesto en mi camino a los hnos. Bishop. Criaturas elegidas por nuestro Padre Celestial, con una misión noble. Sus miradas vierten amor y esperanza. Siempre los recordaré, hnos. Les pido disculpas si en algún momento no pude atenderlos. Sé que el Señor siempre va a estar a su lado. ¡Los recordaré siempre!`,
            
            `<strong>Familia Cobello:</strong><br>
            ¡Qué privilegio para nosotros haberlos tenido en nuestra Rama! Los amamos y agradecemos su amor y trabajo. Estarán por siempre en nuestro corazón. Deseo que el Señor los bendiga cumpliéndole los buenos deseos de sus corazones. ¡Buen regreso a casa! ❤️`,
            
            `<strong>Ana Castege:</strong><br>
            Si había dudas que N.P.C. (Nuestro Padre Celestial) está preocupado por esta pequeña rama, fue una certeza que nos ama y se preocupa por nosotros. Mandó dos seres hermosos en humildad, conocimiento y amor. Por siempre estarán en mi corazón como ejemplo de hermandad con mucho amor.`,

            `<strong>Flia Torres:</strong><br>
            Cada enseñanza, cada sonrisa, cada momento compartido quedará grabado en nuestra memoria. Han sido una luz en nuestro camino. Su trabajo aquí ha sido invaluable. Nos han mostrado el verdadero significado del servicio. ¡Esperamos verlos pronto y les deseamos un feliz reencuentro con sus seres queridos!`
        ];

        let indiceMensaje = 0;
        const contenedorMensaje = document.getElementById('mensaje-actual');
        let intervaloMensajes; // Variable para guardar el ID del intervalo
        let estaPausadoPorClick = false; // Estado para indicar si el usuario lo pausó explícitamente con un click/toque rápido
        let estaPresionado = false; // Estado para indicar si el usuario está actualmente manteniendo presionado el mouse o el dedo

        function mostrarMensaje() {
            // Solo cambia el mensaje si NO está presionado y NO está pausado por un click/toque explícito
            if (estaPresionado || estaPausadoPorClick) return; 

            contenedorMensaje.style.opacity = 0; // animar salida

            setTimeout(() => {
                contenedorMensaje.innerHTML = mensajes[indiceMensaje];
                contenedorMensaje.style.opacity = 1; // animar entrada
                indiceMensaje = (indiceMensaje + 1) % mensajes.length;
            }, 1000); // 1 segundo para la transición de fade
        }

        function iniciarCambioMensajes() {
            clearInterval(intervaloMensajes); // Limpia cualquier intervalo anterior
            // Solo inicia el intervalo si no está explícitamente pausado por el usuario
            if (!estaPausadoPorClick) { 
                intervaloMensajes = setInterval(mostrarMensaje, 10000); // 10 segundos
            }
        }

        function detenerCambioMensajes() {
            clearInterval(intervaloMensajes); // Detiene el cambio automático
        }

        // --- Event Listeners para la pausa temporal al PRESIONAR (mousedown/touchstart) ---
        contenedorMensaje.addEventListener('mousedown', () => {
            estaPresionado = true; // Marca que está siendo presionado
            detenerCambioMensajes(); // Pausa el carrusel de mensajes
        });
        contenedorMensaje.addEventListener('touchstart', (e) => {
            e.preventDefault(); // Previene el zoom en móviles y asegura que solo se dispare este evento
            estaPresionado = true; // Marca que está siendo presionado
            detenerCambioMensajes(); // Pausa el carrusel de mensajes
        }, { passive: false }); // Usar { passive: false } para permitir preventDefault en touchstart

        // --- Event Listeners para la reanudación al SOLTAR (mouseup/touchend) ---
        contenedorMensaje.addEventListener('mouseup', () => {
            estaPresionado = false; // Ya no está siendo presionado
            // Si NO está pausado permanentemente por un click/toque explícito, reanuda el cambio automático
            if (!estaPausadoPorClick) {
                iniciarCambioMensajes();
            }
        });
        contenedorMensaje.addEventListener('touchend', () => {
            estaPresionado = false; // Ya no está siendo presionado
            // Si NO está pausado permanentemente por un click/toque explícito, reanuda el cambio automático
            if (!estaPausadoPorClick) {
                iniciarCambioMensajes();
            }
        });

        // --- Event Listener para el TOGGLE de pausa/reanudación PERMANENTE (click) ---
        contenedorMensaje.addEventListener('click', () => {
            // Si el mensaje está siendo actualmente presionado por el usuario (mousedown/touchstart),
            // el evento 'click' no debe dispararse como un toggle de pausa permanente.
            if (estaPresionado) return; 

            if (estaPausadoPorClick) {
                // Si estaba pausado permanentemente, reanudar
                estaPausadoPorClick = false;
                mostrarMensaje(); // Muestra el siguiente mensaje inmediatamente al reanudar
                iniciarCambioMensajes(); // Reinicia el intervalo para el cambio automático
            } else {
                // Si no estaba pausado permanentemente, pausar permanentemente
                estaPausadoPorClick = true;
                detenerCambioMensajes(); // Detiene el cambio automático
            }
        });

        // Inicializar el carrusel de mensajes
        mostrarMensaje(); // Muestra el primer mensaje inmediatamente
        iniciarCambioMensajes(); // Inicia el intervalo para los cambios automáticos


        // --- Script para controlar la música ---
        const miMusica = document.getElementById('miMusica');
        const playMusicBtn = document.getElementById('playMusicBtn');

        // Función para intentar reproducir la música
        function intentarReproducirMusica() {
            // Intentar reproducir la música
            miMusica.play().then(() => {
                // La reproducción automática fue exitosa, ocultar el botón
                playMusicBtn.style.display = 'none'; 
            }).catch(error => {
                // La reproducción automática fue bloqueada, mostrar el botón
                console.log("La reproducción automática de la música fue bloqueada por el navegador. El usuario debe iniciarla.", error);
                playMusicBtn.style.display = 'block'; 
            });
        }

        // Event listener para el botón de música
        playMusicBtn.addEventListener('click', () => {
            if (miMusica.paused) {
                miMusica.play().catch(error => {
                    console.log("Error al intentar reproducir la música con el botón:", error);
                });
                playMusicBtn.textContent = "Pausar Música";
            } else {
                miMusica.pause();
                playMusicBtn.textContent = "Reproducir Música";
            }
        });

        // Intentar reproducir la música al cargar la página
        document.addEventListener('DOMContentLoaded', intentarReproducirMusica);


        // --- Script para el carrusel de la galería ---
        const galeriaInner = document.getElementById('galeriaInner');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const items = Array.from(document.querySelectorAll('.galeria-item')); 

        let currentIndex = 0;
        let itemsPerPage = getItemsPerPage(); 
        const originalTotalItems = items.length; 

        function getItemsPerPage() {
            if (window.innerWidth <= 480) {
                return 1; 
            } else if (window.innerWidth <= 768) {
                return 2; 
            } else {
                return 3; 
            }
        }

        function setupInfiniteCarousel() {
            const existingClones = galeriaInner.querySelectorAll('.clone');
            existingClones.forEach(clone => clone.remove());

            // Clonar ítems del final y añadirlos al principio
            for (let i = 0; i < itemsPerPage; i++) {
                const cloneIndex = (originalTotalItems - 1 - i + originalTotalItems) % originalTotalItems;
                const clone = items[cloneIndex].cloneNode(true);
                clone.classList.add('clone');
                galeriaInner.prepend(clone);
            }

            // Clonar ítems del principio y añadirlos al final
            for (let i = 0; i < itemsPerPage; i++) {
                const clone = items[i].cloneNode(true);
                clone.classList.add('clone');
                galeriaInner.appendChild(clone);
            }

            currentIndex = itemsPerPage; 
            updateCarousel(false); 
        }

        window.addEventListener('resize', () => {
            const newItemsPerPage = getItemsPerPage();
            if (newItemsPerPage !== itemsPerPage) {
                itemsPerPage = newItemsPerPage;
                setupInfiniteCarousel(); 
            }
        });

        function updateCarousel(smoothTransition = true) {
            if (!smoothTransition) {
                galeriaInner.style.transition = 'none'; 
            } else {
                galeriaInner.style.transition = 'transform 0.5s ease-in-out'; 
            }

            const itemWidth = galeriaInner.querySelector('.galeria-item').offsetWidth;
            galeriaInner.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

            if (smoothTransition) {
                if (currentIndex >= originalTotalItems + itemsPerPage) {
                    setTimeout(() => {
                        currentIndex = itemsPerPage; 
                        updateCarousel(false);
                    }, 500); 
                } else if (currentIndex < itemsPerPage) {
                    setTimeout(() => {
                        currentIndex = originalTotalItems + currentIndex; 
                        updateCarousel(false);
                    }, 500); 
                }
            }
        }

        prevBtn.addEventListener('click', () => {
            currentIndex--;
            updateCarousel();
        });

        nextBtn.addEventListener('click', () => {
            currentIndex++;
            updateCarousel();
        });

        setupInfiniteCarousel();
    </script>
</body>
</html>